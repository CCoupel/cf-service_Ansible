---
- name: bootstrap
  hosts: 127.0.0.1
  connection: local
  gather_facts: false
  tasks:
          - name: debug vars
            debug: 
              msg: "{{ ansible_groups }}"
          
          - name: test
            debug: 
              msg: "item.0={{ item.0.ip }} item.1={{ item.1 }}"
            with_subelements:
            - "{{ ansible_groups }}"
            - groups

          - name: make groups
            add_host: 
              name: "{{ item.0.ip }}"
              group: "{{ item.1 }}"
            with_subelements:
            - "{{ ansible_groups }}"
            - groups

            - name: debug groups
              debug: 
              msg: "{{ groups }}"
